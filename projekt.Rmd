---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Martin Pezdir"
output:
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
  html_document: default
  word_document: default
---

```{r setup, echo=FALSE, results='hide', message=FALSE,warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme
Moj projekt bo govoril o evropskem ter slovenskem razvoju trga motornih vozil v zadnjih nekaj letih, kako se je število motornih števil spreminjalo, o nihanju prometnih nesreč ter kako je kriza vplivala na ta trg.Najprej bom obdelal statistične podatke na splošno, te bom pridobil iz http://www.stat.si/statweb ter http://ec.europa.eu/eurostat. Podatke v obliki html bom pridobil s spletne strani http://left-lane.com/european-car-sales-data.


# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE,results='hide',message='FALSE'}
source("uvoz/uvoz.r", encoding = "UTF-8")
```

## Csv podatki

V tej fazi smo uvozil podatke v obliki CSV s statističnega urada Slovenije in Eurostata(saj bomo primerjali slovenske podatke z evropskimi) ter podatke o prodaji avtomobilov po znamkah v zadnjih 4 letih.V razpredelnicah, ki smo jih ustvarili, so podatki o najrazličnejših delih trga motornih vozil, pa tudi splošna statistika, kot je recimo število prometnih nesreč, količina prevoženih kilometrov na leto glede na skupno količino voznikov. V razpredelnicah je podano tudi število prvih registracij glede na vrsto vozila, starost vozil ter indeks cen motornih vozil od leta 2004 naprej. 

Pa si oglejmo razpredelnico s podatki o vseh potnikih in potniških kilometrih v letih 2010-2014:
```{r,echo=FALSE,message=FALSE}
tabela_Cestni_javni_linijski_prevoz_medkrajevni_in_mednarodni_SLO
```
Podatki v tej razpredelnici so samo tipa "integer". Prvi stolpec vsebuje leta po vrsti od leta 2010 do 2014. V drugem in tretjem stolpcu so numerični podatki in sicer o tem, koliko potnikov se je v posameznem letu prevozilo v Sloveniji, v cestnem javnem linijskem prevozu, ki vključuje tako medkrajevni kot mednarodni prevoz, ter o tem koliko kilometrov so vozači pri teh migracijah naredili(podatki so v milijonih kilometrov).

Če te podatke predstavimo grafično, vidimo drastičen upad vozačev v letu 2012 in vzrok za to bi bilo dobro najti v naslednjih fazah.

```{r,echo=FALSE,message=FALSE}
Vozaci
```

# HTML podatki

Pokažimo še razpredelnico prodaje avtomobilov znamke Ford v letih 2012-2015:
```{r,echo=FALSE,message=FALSE}
Ford_prodaja
```
V tej tabeli so podatki treh tipov: 

* nizi,
* numerični vektorji,
* urejeni faktorji.

V prvem stolpcu tabele so po vrsti navedeni meseci v leti, v naslednjih treh pa si po vrsti sledijo leta od 2012 do 2015. V zadnjih dveh stolpcih je navedena povprečna količina in proizvajalec avtomobila.

Ti podatki so pridobljeni iz html strani. Problem, ki smo ga imeli je bil ta, da so bili prvotni podatki tipa "character", kar je povzročalo probleme pri računanju povprečji. To težavo smo odpravili s funkcijo "as.numeric()". Pri tem smo morali stolpec mesec spremeniti v urejen faktor mesec, kar smo uporabili pri risanju grafov.
Podatke smo zbrali še za 8 ostalih znamk in jih uredili na podoben način.
Naslednji graf predstavlja prodajo avtomobilov,znamke z najvišjo povprečno prodajo po mesecih v zadnjih 4. letih:

```{r,echo=FALSE,results='hide',message=FALSE}
graf_Ford
```

\pagebreak

Naslednji graf pa predstavlja prodajo avtomobilov, znamke z najnižjo povprečno prodajo po mesecih v zadnjih 4. letih:

```{r,echo=FALSE,results='hide',message=FALSE}
graf_Mazda
```

Razlika med tema dvema znamkama ni tako očitna, ko pa podatke predstavimo na skupnem grafu je ta razlika več kot očitna.

```{r,echo=FALSE,results='hide',message=FALSE}
skupni_graf
```
